import{_ as N}from"./index.950a0359.js";import{r as v,l as f,m as V,c as g,d as b,p as h,F as k,q as $,s as j,o as y,u as A,t as D}from"./vendor.e4bc6a5d.js";const F={props:{itemHeight:{type:Number,default:20,validator:function(r){return r>=1}},amount:{type:Number,default:5,validator:function(r){return r>=1}},items:{type:Array,default:()=>[]},idProp:{type:String,default:"index"},textProp:{type:String,default:"text"}},setup(r){let s=r.amount*r.itemHeight,n=[],a=v([]);n[-1]=a.value[-1]=0;let p=v(0),d=f(()=>n[n.length-1]+a.value[a.value.length-1]),o=f(()=>({height:`${d.value}px`}));const S=f(()=>({height:`${Math.min(s,d.value)}px`}));let B=f(()=>({transform:`translateY(${p.value}px)`})),_=v(null),m=v([]);const x=(l,e)=>{let t=[];const i=Math.max(l,0),u=Math.min(l+e+1,r.items.length);return i<=u&&(t=r.items.slice(i,u)),t},H=(l,e,t)=>{if(e>t)return t;const i=Math.floor((e+t)/2);return a.value[i]===l?i:a.value[i]<l?H(l,i+1,t):H(l,e,i-1)},M=l=>{let e=n[l],t=1;for(;e<s&&t<n.length;)t++,e+=n[l+t];return t},P=async({target:{scrollTop:l}})=>{const e=H(l,0,a.value.length);p.value=a.value[e];const t=M(e);m.value=x(e,t),d.value-l-s<5&&(m.value=x(e,t+r.amount),await j(),w(e))},w=l=>{const e=_.value.children;e&&Array.from(e).map((t,i)=>{const{offsetHeight:u}=t,c=i+l;n[c]!=u&&(n[c]=u,a.value[c]=n[c-1]+a.value[c-1])})};return m.value=x(0,r.amount),V(()=>w(0)),{runScroller:P,sources:m,spacer:_,spacerStyle:B,viewportStyle:o,boxStyle:S}}};function L(r,s,n,a,p,d){return y(),g("div",{class:"virtual-scroller",onScroll:s[0]||(s[0]=(...o)=>a.runScroller&&a.runScroller(...o)),style:h(a.boxStyle)},[b("div",{class:"viewport",style:h(a.viewportStyle)},[b("div",{ref:"spacer",style:h(a.spacerStyle)},[(y(!0),g(k,null,$(a.sources,(o,S)=>(y(),g(k,{key:`virtual-item-${S}-${o[n.idProp]}`},[r.$slots.template?A(r.$slots,"template",{key:0,item:o}):(y(),g("div",{key:1,class:"virtual-item",style:h({minHeight:`${n.itemHeight}px`})},D(o[n.textProp]),5))],64))),128))],4)],4)],36)}var z=N(F,[["render",L]]);export{z as default};
